{"version":3,"sources":["conponents/Searchbar/Searchbar.module.css","conponents/ImageGalleryItem/ImageGalleryItem.module.css","conponents/ImageGallery/ImageGallery.module.css","conponents/Modal/Modal.module.css","conponents/Button/Button.module.css","conponents/Searchbar/Searchbar.js","conponents/ImageGalleryItem/ImageGalleryItem.js","services/PixabayAPI.js","conponents/ImageGallery/ImageGallery.js","conponents/Button/Button.js","conponents/Modal/Modal.js","App.js","reportWebVitals.js","index.js"],"names":["module","exports","Searchbar","state","query","handleQueryChange","event","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","trim","props","onSubmit","toast","error","className","s","this","SearchForm","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","imagesData","map","image","id","src","webformatURL","srclarge","largeImageURL","alt","ImageGalleryItemImage","page","a","fetch","response","json","api","fetchPixabayImages","ImageGallery","images","totalImages","showLoader","scrollToEndPage","window","scrollTo","top","document","body","scrollHeight","behavior","handleClickImage","openImage","target","closest","sItem","querySelector","getAttribute","fetchImages","prevProps","prevState","prevQuery","nextQuery","prevPage","nextPage","pixabayAPI","newImages","hits","total","imagesIsAvailable","setLastPage","Math","ceil","length","resetState","onClick","Loader","color","height","width","Button","Modal","imageURL","closeImage","addEventListener","Overlay","App","lastPage","visibilityLoadMore","handleLoadMore","info","handleFormSubmit","code","removeEventListener","autoClose","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.49456218.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__1bDOu\",\"SearchForm\":\"Searchbar_SearchForm__2B87a\",\"SearchFormButton\":\"Searchbar_SearchFormButton__3P7St\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__mBzmV\",\"SearchFormInput\":\"Searchbar_SearchFormInput__347JP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__1e-w2\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__3WF3u\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__dkCte\",\"Loader\":\"ImageGallery_Loader__1EreS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__1l_Yc\",\"Modal\":\"Modal_Modal__2B0PP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__1P92e\"};","import { Component } from 'react';\nimport { toast } from 'react-toastify';\n\nimport s from './Searchbar.module.css';\n\nclass Searchbar extends Component {\n  state = { query: '' };\n\n  handleQueryChange = event => {\n    this.setState({ query: event.currentTarget.value.toLowerCase() });\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n\n    if (this.state.query.trim() === '') {\n      toast.error('Enter image query');\n      return;\n    }\n\n    this.props.onSubmit(this.state.query);\n    this.setState({ query: '' });\n  };\n\n  render() {\n    return (\n      <header className={s.Searchbar}>\n        <form onSubmit={this.handleSubmit} className={s.SearchForm}>\n          <button type=\"submit\" className={s.SearchFormButton}>\n            <span className={s.SearchFormButtonLabel}>Search</span>\n          </button>\n\n          <input\n            className={s.SearchFormInput}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            value={this.state.query}\n            onChange={this.handleQueryChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n","import s from './ImageGalleryItem.module.css';\n\nfunction ImageGalleryItem(imagesData) {\n  const images = imagesData.imagesData;\n\n  return images.map(image => (\n    <li key={image.id} className={s.ImageGalleryItem}>\n      <img\n        id={image.id}\n        src={image.webformatURL}\n        srclarge={image.largeImageURL}\n        alt=\"\"\n        className={s.ImageGalleryItemImage}\n      />\n    </li>\n  ));\n}\n\nexport default ImageGalleryItem;\n","async function fetchPixabayImages(query, page) {\n  const response = await fetch(\n    `https://pixabay.com/api/?image_type=photo&orientation=horizontal&q=${query}&page=${page}&per_page=12&key=3749534-832657ce2c7737c7c4ba585dd`,\n  );\n  return await response.json();\n}\n\nconst api = {\n  fetchPixabayImages,\n};\n\nexport default api;\n","import { Component } from 'react';\nimport { toast } from 'react-toastify';\nimport Loader from 'react-loader-spinner';\nimport s from './ImageGallery.module.css';\nimport sItem from '../ImageGalleryItem/ImageGalleryItem.module.css';\n\nimport ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\nimport pixabayAPI from '../../services/PixabayAPI';\n\nclass ImageGallery extends Component {\n  state = {\n    images: [],\n    error: null,\n    totalImages: 0,\n    showLoader: false,\n  };\n\n  async componentDidMount() {\n    this.setState({ showLoader: true });\n    await this.fetchImages(this.props.query, this.props.page);\n    this.setState({ showLoader: false });\n  }\n\n  async componentDidUpdate(prevProps, prevState) {\n    const prevQuery = prevProps.query;\n    const nextQuery = this.props.query;\n\n    const prevPage = prevProps.page;\n    const nextPage = this.props.page;\n\n    if (prevPage !== nextPage || prevQuery !== nextQuery) {\n      if (prevQuery !== nextQuery) {\n        this.setState({\n          images: [],\n          totalImages: 0,\n        });\n      }\n\n      this.setState({ showLoader: true });\n      await this.fetchImages(nextQuery, nextPage);\n      this.setState({ showLoader: false });\n    }\n  }\n\n  async fetchImages(query, page) {\n    this.setState({ showLoader: true });\n    const newImages = await pixabayAPI.fetchPixabayImages(query, page);\n\n    this.setState(({ images }) => ({\n      images: [...images, ...newImages.hits],\n      totalImages: newImages.total,\n    }));\n\n    this.imagesIsAvailable();\n    this.scrollToEndPage();\n\n    this.props.setLastPage(Math.ceil(this.state.totalImages / 12));\n    this.setState({ showLoader: false });\n  }\n\n  imagesIsAvailable() {\n    if (!this.state.images.length) {\n      toast.error('За запитом нічого не знайдено. Спробуйте інший запит!');\n      this.props.resetState();\n    }\n  }\n\n  scrollToEndPage = () => {\n    window.scrollTo({\n      top: document.body.scrollHeight,\n      behavior: 'smooth',\n    });\n  };\n\n  handleClickImage = event => {\n    this.props.openImage(\n      event.target\n        .closest(`.${sItem.ImageGalleryItem}`)\n        .querySelector('img')\n        .getAttribute('srclarge'),\n    );\n  };\n\n  render() {\n    return (\n      this.state.images && (\n        <div>\n          <ul onClick={this.handleClickImage} className={s.ImageGallery}>\n            <ImageGalleryItem\n              imagesData={this.state.images}\n              openImage={this.props.openImage}\n            />\n          </ul>\n\n          {this.state.showLoader && (\n            <div className={s.Loader}>\n              <Loader type=\"Circles\" color=\"#3f51b5\" height={40} width={40} />\n            </div>\n          )}\n        </div>\n      )\n    );\n  }\n}\n\nexport default ImageGallery;\n","import { Component } from 'react';\nimport s from './Button.module.css';\n\nclass Button extends Component {\n  state = {};\n\n  render() {\n    return (\n      <button\n        autoFocus\n        onClick={this.props.onClick}\n        type=\"button\"\n        className={s.Button}\n      >\n        Load more\n      </button>\n    );\n  }\n}\n\nexport default Button;\n","import { Component } from 'react';\nimport s from './Modal.module.css';\n\n// class Modal extends Component {\n//   state = {};\n\n//   componentDidMount() {\n//     window.addEventListener('keydown', this.props.closeImage);\n//   }\n\n//   render() {\n//     return (\n//       <div onClick={this.props.closeImage} className={s.Overlay}>\n//         <div className={s.Modal}>\n//           <img src={this.props.imageURL && this.props.imageURL} alt=\"\" />\n//         </div>\n//       </div>\n//     );\n//   }\n// }\n\nfunction Modal({ imageURL, closeImage }) {\n  window.addEventListener('keydown', closeImage);\n\n  return (\n    <div onClick={closeImage} className={s.Overlay}>\n      <div className={s.Modal}>\n        <img src={imageURL} alt=\"\" />\n      </div>\n    </div>\n  );\n}\n\nexport default Modal;\n","import { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport { toast } from 'react-toastify';\n\nimport Searchbar from './conponents/Searchbar/Searchbar';\nimport ImageGallery from './conponents/ImageGallery/ImageGallery';\nimport Button from './conponents/Button/Button';\nimport Modal from './conponents/Modal/Modal';\n\nclass App extends Component {\n  state = {\n    query: '',\n    page: 0,\n    lastPage: 1,\n    visibilityLoadMore: false,\n    largeImageURL: '',\n  };\n\n  resetState = () => {\n    this.setState({\n      query: '',\n      page: 0,\n      lastPage: 1,\n      visibilityLoadMore: false,\n      largeImageURL: '',\n    });\n  };\n\n  setLastPage = lastPage => {\n    this.setState({ lastPage: lastPage });\n\n    if (this.state.page < this.state.lastPage) {\n      this.setState({ visibilityLoadMore: true });\n    }\n  };\n\n  handleLoadMore = () => {\n    this.setState(prevState => ({ page: prevState.page + 1 }));\n\n    if (this.state.page === this.state.lastPage - 1) {\n      this.setState({ visibilityLoadMore: false });\n      toast.info('За запитом завантажено останні картинки');\n    }\n  };\n\n  handleFormSubmit = query => {\n    this.setState({ query, page: 1 });\n  };\n\n  openImage = imageURL => {\n    this.setState({ largeImageURL: imageURL });\n  };\n\n  closeImage = event => {\n    if (event.target === event.currentTarget || event.code === 'Escape') {\n      this.setState({ largeImageURL: '' });\n      window.removeEventListener('keydown', this.closeImage);\n    }\n  };\n\n  render() {\n    return (\n      <div>\n        <Searchbar onSubmit={this.handleFormSubmit} />\n        {this.state.query && (\n          <ImageGallery\n            query={this.state.query}\n            page={this.state.page}\n            setLastPage={this.setLastPage}\n            resetState={this.resetState}\n            openImage={this.openImage}\n          />\n        )}\n\n        {this.state.visibilityLoadMore && (\n          <Button onClick={this.handleLoadMore} />\n        )}\n\n        {this.state.largeImageURL && (\n          <Modal\n            imageURL={this.state.largeImageURL}\n            closeImage={this.closeImage}\n          />\n        )}\n\n        <ToastContainer autoClose={4000} />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'modern-normalize/modern-normalize.css';\nimport './index.css';\nimport App from './App';\nimport 'react-toastify/dist/ReactToastify.css';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}